<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Planicchio ğŸ±</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>

<style>
body { transition: .3s }
.hidden { display:none }
.pet { animation: float 2.5s ease-in-out infinite }
@keyframes float {
  0%{transform:translateY(0)}
  50%{transform:translateY(-12px)}
  100%{transform:translateY(0)}
}
</style>
</head>

<body class="bg-orange-50 text-gray-800">

<!-- ğŸ”Š Sons (gerados por cÃ³digo, nÃ£o quebram) -->
<script>
function sound(type){
  const ctx = new AudioContext()
  const o = ctx.createOscillator()
  const g = ctx.createGain()
  o.connect(g); g.connect(ctx.destination)
  o.frequency.value = type==="ok"?600:type==="up"?900:200
  o.start(); g.gain.exponentialRampToValueAtTime(0.00001, ctx.currentTime + .3)
}
</script>

<!-- ğŸ± PET GLOBAL -->
<div class="fixed bottom-4 right-4 text-center z-50">
  <div onclick="meow()" class="text-6xl pet cursor-pointer">ğŸ±</div>
  <div id="petText" class="bg-white p-2 rounded shadow text-sm">
    Cliccami! ğŸ˜¸
  </div>
</div>

<!-- ğŸ†˜ SOS -->
<a href="https://wa.me/393716755981" target="_blank"
class="fixed bottom-4 left-4 bg-green-500 text-white px-4 py-2 rounded-full z-50">
ğŸ†˜ SOS Planicchio
</a>

<!-- ================= TELA INICIAL ================= -->
<div id="start" class="min-h-screen flex flex-col items-center justify-center">
  <div class="text-7xl pet mb-2">ğŸ±</div>
  <h1 class="text-4xl font-bold">PLANICCHIO</h1>
  <p class="mb-4">Scegli il tuo corso</p>

  <div class="grid grid-cols-2 gap-3">
    <button class="btn" onclick="startCourse('it-en')">ğŸ‡®ğŸ‡¹ â†’ ğŸ‡¬ğŸ‡§</button>
    <button class="btn" onclick="startCourse('it-pt')">ğŸ‡®ğŸ‡¹ â†’ ğŸ‡§ğŸ‡·</button>
    <button class="btn" onclick="startCourse('pt-it')">ğŸ‡§ğŸ‡· â†’ ğŸ‡®ğŸ‡¹</button>
    <button class="btn" onclick="startCourse('pt-en')">ğŸ‡§ğŸ‡· â†’ ğŸ‡¬ğŸ‡§</button>
    <button class="btn" onclick="startCourse('en-it')">ğŸ‡¬ğŸ‡§ â†’ ğŸ‡®ğŸ‡¹</button>
    <button class="btn" onclick="startCourse('en-pt')">ğŸ‡¬ğŸ‡§ â†’ ğŸ‡§ğŸ‡·</button>
  </div>
</div>

<!-- ================= APP ================= -->
<div id="app" class="hidden">

<!-- ğŸ” TOPO -->
<div class="p-4 bg-white shadow">
  <div class="flex justify-between items-center">
    <div>
      <b id="levelText">A1 â€“ Esploratore</b>
      <div class="w-40 bg-gray-300 rounded">
        <div id="progress" class="bg-green-500 h-2 w-1/5 rounded"></div>
      </div>
    </div>
    <button onclick="toggleTheme()">ğŸŒ™</button>
  </div>
</div>

<!-- ğŸ“Œ MENU -->
<div class="flex gap-2 p-2 overflow-x-auto bg-orange-100 text-sm">
  <button onclick="show('home')">ğŸ  Home</button>
  <button onclick="show('ex')">âœï¸ Esercizi</button>
  <button onclick="show('game')">ğŸ® Gioco</button>
  <button onclick="show('chat')">ğŸ’¬ ComunitÃ </button>
  <button onclick="show('profile')">ğŸ‘¤ Profilo</button>
</div>

<!-- ================= HOME ================= -->
<div id="home" class="p-4">
  <h2 class="font-bold">ğŸ¯ Missioni giornaliere</h2>
  <ul>
    <li>âœ” 10 parole</li>
    <li>âœ” 1 esercizio parlato</li>
    <li>âœ” 1 gioco</li>
  </ul>

  <h2 class="font-bold mt-4">ğŸ”¥ Missioni settimanali</h2>
  <p>5 missioni per sbloccare titoli</p>
</div>

<!-- ================= ESERCIZI ================= -->
<div id="ex" class="p-4 hidden">
  <p>Come si dice <b>cibo</b> in inglese?</p>
  <button onclick="answer(true)" class="btn">Food</button>
  <button onclick="answer(false)" class="btn">House</button>

  <div class="mt-4">
    <button onclick="speak()">ğŸ”Š Ascolta</button>
    <button onclick="listen()">ğŸ¤ Parla</button>
    <p id="voice"></p>
  </div>
</div>

<!-- ================= GIOCO ================= -->
<div id="game" class="p-4 hidden">
  <p>Clicca la parola giusta in 5s:</p>
  <button onclick="answer(true)" class="btn">Food</button>
  <button onclick="answer(false)" class="btn">Car</button>
</div>

<!-- ================= CHAT ================= -->
<div id="chat" class="p-4 hidden">
  <input id="msg" class="border p-2 w-full" placeholder="Scrivi...">
  <button onclick="send()" class="btn mt-2">Invia</button>
  <div id="msgs" class="mt-2 text-sm"></div>
</div>

<!-- ================= PROFILO ================= -->
<div id="profile" class="p-4 hidden">
  <input id="name" class="border p-2" placeholder="Il tuo nome">
  <button onclick="saveName()" class="btn">Salva</button>
  <p id="saved"></p>

  <h3 class="mt-4">ğŸ”’ VIP</h3>
  <button onclick="vip()" class="btn bg-yellow-400">Sblocca VIP</button>

  <button onclick="reset()" class="btn mt-4">Cambia corso</button>
</div>

</div>

<script>
let progress = Number(localStorage.getItem("progress")) || 20

document.getElementById("progress").style.width = progress + "%"

function startCourse(c){
  localStorage.setItem("course", c)
  start.classList.add("hidden")
  app.classList.remove("hidden")
  notify("Benvenuto su Planicchio!")
}

function show(id){
  ["home","ex","game","chat","profile"].forEach(x=>document.getElementById(x).classList.add("hidden"))
  document.getElementById(id).classList.remove("hidden")
}

function answer(ok){
  if(ok){
    progress+=10
    sound("ok")
    pet("Bravo! ğŸ˜»")
  }else{
    sound("no")
    pet("Riprova ğŸ˜¿")
  }
  if(progress>=100){
    sound("up")
    alert("ğŸ‰ Livello aumentato!")
    progress=0
  }
  localStorage.setItem("progress",progress)
  document.getElementById("progress").style.width=progress+"%"
}

function speak(){
  let u=new SpeechSynthesisUtterance("Food")
  u.lang="en-US"
  speechSynthesis.speak(u)
}

function listen(){
  let r=new webkitSpeechRecognition()
  r.lang="en-US"
  r.start()
  r.onresult=e=>voice.innerText=e.results[0][0].transcript
}

function send(){
  msgs.innerHTML+=`<div>ğŸ‘¤ ${msg.value}</div>`
  msg.value=""
}

function saveName(){
  localStorage.setItem("name",name.value)
  saved.innerText="Salvato!"
}

function reset(){
  location.reload()
}

function vip(){
  alert("VIP: lezioni avanzate, nativi, IA")
}

function pet(t){
  petText.innerText=t
}

function meow(){
  pet("Miao! Continua!")
}

function toggleTheme(){
  document.body.classList.toggle("bg-gray-900")
  document.body.classList.toggle("text-white")
}

function notify(text){
  if("Notification"in window){
    Notification.requestPermission().then(p=>{
      if(p==="granted") new Notification(text)
    })
  }
}
</script>

<style>
.btn{
  background:#fb923c;
  color:white;
  padding:8px 12px;
  border-radius:12px;
  margin:4px 0;
}
</style>

</body>
</html>
