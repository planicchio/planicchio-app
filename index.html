<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Planicchio Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --p-orange: #FF8C00; --p-bg: #FFF5EB; --p-text: #333; }
        .dark { --p-bg: #1a1a1a; --p-text: #f0f0f0; }
        body { background: var(--p-bg); color: var(--p-text); font-family: sans-serif; margin: 0; overflow: hidden; transition: 0.3s; }
        .page { display: none; height: 100vh; overflow-y: auto; padding-bottom: 100px; }
        .active { display: block !important; }
        .card { background: white; border-radius: 20px; padding: 15px; border: 2px solid #FFEDD5; margin: 10px; box-shadow: 0 4px 0 #FFEDD5; }
        .dark .card { background: #2d2d2d; border-color: #444; box-shadow: 0 4px 0 #000; }
        .nav-bar { position: fixed; bottom: 0; width: 100%; background: white; display: flex; justify-content: space-around; padding: 12px; border-top: 3px solid #FFEDD5; z-index: 1000; }
        .dark .nav-bar { background: #2d2d2d; border-top-color: #444; }
        .pet { font-size: 70px; cursor: pointer; transition: 0.3s; display: inline-block; }
        .pet:hover { transform: scale(1.1); }
        .bounce { animation: bounce 0.6s ease; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        .balao { background: white; border: 2px solid var(--p-orange); border-radius: 15px; padding: 10px; font-size: 13px; font-weight: bold; margin-bottom: 10px; position: relative; color: #333; }
        .vip { background: linear-gradient(45deg, #ffd700, #ff8c00); color: white; padding: 2px 6px; border-radius: 5px; font-size: 8px; }
    </style>
</head>
<body>

    <div id="page-splash" class="page active flex flex-col items-center justify-center bg-[#FF8C00] text-center p-6">
        <div class="pet bounce" id="splash-pet" onclick="emitirSom('meow')">üê±</div>
        <div class="balao mt-4">Ciao! Benvenuti su Planicchio!</div>
        <h1 class="text-white text-4xl font-black italic mb-2 tracking-tighter">PLANICCHIO</h1>
        <p class="text-white text-[10px] mb-8 font-bold opacity-90">SCEGLI IL TUO CORSO ‚Ä¢ ESCOLHA SEU CURSO ‚Ä¢ CHOOSE COURSE</p>
        
        <div class="grid grid-cols-1 gap-2 w-full max-w-xs">
            <button onclick="iniciar('it-en')" class="bg-yellow-400 text-orange-900 font-black p-4 rounded-xl shadow-xl uppercase text-xs ring-4 ring-white">‚≠ê Italiano ‚ûî English</button>
            <button onclick="iniciar('it-pt')" class="bg-white text-orange-600 font-bold p-3 rounded-xl uppercase text-xs">Italiano ‚ûî Portugu√™s</button>
            <button onclick="iniciar('pt-it')" class="bg-white text-orange-600 font-bold p-3 rounded-xl uppercase text-xs">Portugu√™s ‚ûî Italiano</button>
            <button onclick="iniciar('pt-en')" class="bg-white text-orange-600 font-bold p-3 rounded-xl uppercase text-xs">Portugu√™s ‚ûî English</button>
            <button onclick="iniciar('en-it')" class="bg-white text-orange-600 font-bold p-3 rounded-xl uppercase text-xs">English ‚ûî Italiano</button>
            <button onclick="iniciar('en-pt')" class="bg-white text-orange-600 font-bold p-3 rounded-xl uppercase text-xs">English ‚ûî Portugu√™s</button>
        </div>
    </div>

    <div id="page-home" class="page">
        <header class="p-4 bg-white sticky top-0 border-b-2 border-orange-100 flex justify-between items-center dark:bg-[#2d2d2d] z-50">
            <div>
                <div id="ui-rank" class="font-black text-orange-600 text-[10px] uppercase">Novizio üê£</div>
                <div class="text-[9px] font-bold text-gray-400" id="ui-n-select">LIVELLO A1</div>
            </div>
            <div class="flex flex-col items-end">
                <span class="text-[10px] font-bold">LVL <span id="ui-lvl">1</span></span>
                <div class="w-24 bg-gray-200 h-2 rounded-full overflow-hidden border"><div id="ui-bar" class="bg-orange-500 h-full w-0 transition-all"></div></div>
            </div>
        </header>

        <div class="p-2">
            <div class="card bg-orange-50">
                <h3 id="txt-md" class="font-black text-[10px] uppercase text-orange-600 mb-3">Missioni Diarie</h3>
                <div class="space-y-2 text-xs font-bold">
                    <label class="flex items-center gap-2 bg-white p-2 rounded-lg"><input type="checkbox" onchange="ganharXP(20)"> <span id="md1">Fai il Quiz</span></label>
                    <label class="flex items-center gap-2 bg-white p-2 rounded-lg"><input type="checkbox" onchange="ganharXP(20)"> <span id="md2">Tocca il Pet</span></label>
                    <label class="flex items-center gap-2 bg-white p-2 rounded-lg"><input type="checkbox" onchange="ganharXP(20)"> <span id="md3">Gioca 5s</span></label>
                </div>
            </div>

            <div class="flex flex-col items-center my-6">
                <div class="balao text-center" id="pet-fala">Andiamo a studiar! üöÄ</div>
                <div class="pet" id="main-pet" onclick="interagirPet()">üê±</div>
            </div>

            <div class="card text-center" id="game-area">
                <h4 class="font-black text-[10px] text-orange-600 mb-2">SPEED CLICK ‚ö°</h4>
                <div id="game-content">
                    <p class="text-xs mb-3" id="game-msg">Clicca 5 volte in 5 secondi!</p>
                    <button onclick="jogar()" class="bg-orange-500 text-white px-6 py-2 rounded-full font-bold text-xs shadow-lg">START</button>
                </div>
            </div>
        </div>
    </div>

    <div id="page-ex" class="page">
        <div class="p-4">
            <h2 class="text-2xl font-black text-orange-600 mb-4" id="t-ex">ESERCIZI</h2>
            <div class="card">
                <p id="q-txt" class="text-lg font-bold mb-4 text-center">...</p>
                <div id="q-opts" class="grid grid-cols-1 gap-2"></div>
            </div>
            <div class="grid grid-cols-2 gap-2 mt-4">
                <div class="card opacity-50"><p class="text-[10px] font-bold">ORTOGRAFIA <span class="vip">VIP</span></p></div>
                <div class="card opacity-50"><p class="text-[10px] font-bold">SITUAZIONI <span class="vip">VIP</span></p></div>
            </div>
        </div>
    </div>

    <div id="page-profile" class="page text-center">
        <div class="p-6">
            <div class="pet text-8xl mb-4" id="prof-pet">üê±</div>
            <input type="text" id="user-name" class="text-center font-black text-2xl border-b-2 border-orange-400 w-full mb-6 bg-transparent outline-none" placeholder="Tuonome" onchange="salvarPerfil()">
            
            <div class="card text-left">
                <p class="font-black text-[10px] mb-2 text-orange-600 uppercase">Impostazioni</p>
                <div class="flex justify-between items-center mb-4">
                    <span class="text-sm font-bold">Animal:</span>
                    <select onchange="trocarEmoji(this.value)" class="p-1 rounded border">
                        <option value="üê±">Gatto</option>
                        <option value="üê∂">Cane</option>
                        <option value="üê∞">Coniglio</option>
                    </select>
                </div>
                <div class="flex justify-between items-center mb-4">
                    <span class="text-sm font-bold">Modo Dark:</span>
                    <input type="checkbox" onchange="document.body.classList.toggle('dark')">
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-sm font-bold">N√≠vel:</span>
                    <select class="p-1 rounded border" onchange="document.getElementById('ui-n-select').innerText='LIVELLO '+this.value">
                        <option value="A1">A1</option><option value="B2">B2</option><option value="C1">C1</option>
                    </select>
                </div>
            </div>

            <button onclick="window.open('https://wa.me/393716755981')" class="w-full bg-green-500 text-white font-black p-4 rounded-xl mt-4 shadow-lg">SOS PLANICCHIO üì±</button>
            <button onclick="location.reload()" class="mt-8 text-gray-400 font-bold text-xs uppercase underline">Cambia Corso</button>
        </div>
    </div>

    <nav id="nav" class="nav-bar hidden">
        <button onclick="aba('home')" class="nav-item flex flex-col items-center">üè†<span class="text-[9px] font-bold">HOME</span></button>
        <button onclick="aba('ex')" class="nav-item flex flex-col items-center">üìñ<span class="text-[9px] font-bold">QUIZ</span></button>
        <button onclick="aba('profile')" class="nav-item flex flex-col items-center">üë§<span class="text-[9px] font-bold">PROFILO</span></button>
    </nav>

    <script>
        let xp = 0;
        let pet = "üê±";
        let lang = 'it';

        const TRAD = {
            'it': { md: "Missioni Diarie", ex: "Esercizi", rank: "Novizio üê£" },
            'pt': { md: "Miss√µes Di√°rias", ex: "Exerc√≠cios", rank: "Novato üê£" }
        };

        const QUESTS = [
            {q: "Come si dice 'Bread' in Italiano?", o: ["Pane", "Mela", "Acqua"], ok: 0},
            {q: "Traduci: 'How are you?'", o: ["Come stai?", "Grazie", "Buongiorno"], ok: 0}
        ];

        function iniciar(curso) {
            lang = curso.split('-')[0];
            document.getElementById('page-splash').classList.remove('active');
            document.getElementById('page-home').classList.add('active');
            document.getElementById('nav').classList.remove('hidden');
            document.getElementById('ui-curr-lang')?.innerText = curso.toUpperCase();
            
            // Tradu√ß√£o b√°sica
            const t = TRAD[lang] || TRAD['it'];
            document.getElementById('txt-md').innerText = t.md;
            document.getElementById('t-ex').innerText = t.ex;
            document.getElementById('ui-rank').innerText = t.rank;
            
            carregarQuiz();
        }

        function aba(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('page-' + id).classList.add('active');
            emitirSom('nav');
        }

        function ganharXP(v) {
            xp += v;
            document.getElementById('ui-lvl').innerText = Math.floor(xp/100) + 1;
            document.getElementById('ui-bar').style.width = (xp % 100) + "%";
            if(xp % 100 === 0 && xp > 0) { emitirSom('level'); alert("LEVEL UP! üéâ"); }
        }

        function interagirPet() {
            const falas = ["Bravissimo!", "Miao!", "Studiamo!", "Vai forte!"];
            document.getElementById('pet-fala').innerText = falas[Math.floor(Math.random()*falas.length)];
            document.getElementById('main-pet').classList.add('bounce');
            setTimeout(() => document.getElementById('main-pet').classList.remove('bounce'), 600);
            emitirSom('meow');
        }

        function trocarEmoji(e) {
            pet = e;
            document.getElementById('main-pet').innerText = e;
            document.getElementById('prof-pet').innerText = e;
            document.getElementById('splash-pet').innerText = e;
        }

        function carregarQuiz() {
            const item = QUESTS[Math.floor(Math.random()*QUESTS.length)];
            document.getElementById('q-txt').innerText = item.q;
            const box = document.getElementById('q-opts');
            box.innerHTML = "";
            item.o.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = "card font-bold text-sm text-left hover:bg-orange-100 transition";
                btn.innerText = opt;
                btn.onclick = () => {
                    if(i === item.ok) { emitirSom('win'); ganharXP(30); carregarQuiz(); }
                    else { emitirSom('lose'); btn.style.background = "#ffcccc"; }
                };
                box.appendChild(btn);
            });
        }

        // MOTOR DE SOM SINTETIZADO (N√£o depende de arquivos externos)
        function emitirSom(tipo) {
            const context = new (window.AudioContext || window.webkitAudioContext)();
            const osc = context.createOscillator();
            const gain = context.createGain();
            osc.connect(gain);
            gain.connect(context.destination);

            if(tipo === 'meow') { osc.frequency.setValueAtTime(600, context.currentTime); osc.frequency.exponentialRampToValueAtTime(800, context.currentTime + 0.1); }
            else if(tipo === 'win') { osc.frequency.setValueAtTime(440, context.currentTime); osc.frequency.exponentialRampToValueAtTime(880, context.currentTime + 0.2); }
            else if(tipo === 'level') { osc.frequency.setValueAtTime(523, context.currentTime); osc.frequency.setValueAtTime(659, context.currentTime + 0.2); osc.frequency.setValueAtTime(783, context.currentTime + 0.4); }
            else { osc.frequency.setValueAtTime(300, context.currentTime); }

            gain.gain.setValueAtTime(0.1, context.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, context.currentTime + 0.5);
            osc.start();
            osc.stop(context.currentTime + 0.5);
        }

        let clicks = 0;
        function jogar() {
            clicks = 0;
            document.getElementById('game-content').innerHTML = `<button onclick="this.innerText=++clicks; if(clicks>=5)fimJogo()" class="w-24 h-24 bg-red-500 rounded-full text-white text-3xl font-black">TAP!</button>`;
            setTimeout(() => { if(clicks < 5) { document.getElementById('game-content').innerHTML = `Tempo scaduto! üò¢ <button onclick="location.reload()" class="block mx-auto mt-2 text-blue-500">Riprova</button>`; } }, 5000);
        }
        function fimJogo() { ganharXP(50); document.getElementById('game-content').innerHTML = `GRANDE! +50XP üéâ <button onclick="location.reload()" class="block mx-auto mt-2 text-blue-500">Ok</button>`; emitirSom('level'); }
    </script>
</body>
</html>
