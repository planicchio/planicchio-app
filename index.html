<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>PLANICCHIO ğŸ±</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#fb923c">

<style>
body { transition: 0.3s }
.hidden { display:none }
</style>
</head>

<body class="bg-orange-50 text-gray-800">

<!-- ================= SONS ================= -->
<audio id="meow" src="assets/meow.mp3"></audio>
<audio id="correct" src="assets/correct.mp3"></audio>
<audio id="wrong" src="assets/wrong.mp3"></audio>
<audio id="levelup" src="assets/levelup.mp3"></audio>

<!-- ================= TELA INICIAL ================= -->
<div id="start" class="min-h-screen flex flex-col items-center justify-center">
  <img src="assets/cat.gif" class="w-40 cursor-pointer" onclick="meow()">
  <h1 class="text-5xl font-bold mt-2">PLANICCHIO</h1>
  <p class="mb-4">Escolha seu curso</p>

  <div class="grid grid-cols-2 gap-3">
    <button class="btn" onclick="startApp('IT-EN')">ğŸ‡®ğŸ‡¹ â†’ ğŸ‡¬ğŸ‡§</button>
    <button class="btn" onclick="startApp('IT-PT')">ğŸ‡®ğŸ‡¹ â†’ ğŸ‡§ğŸ‡·</button>
    <button class="btn" onclick="startApp('PT-IT')">ğŸ‡§ğŸ‡· â†’ ğŸ‡®ğŸ‡¹</button>
    <button class="btn" onclick="startApp('EN-IT')">ğŸ‡¬ğŸ‡§ â†’ ğŸ‡®ğŸ‡¹</button>
  </div>
</div>

<!-- ================= HOME ================= -->
<div id="home" class="hidden p-4">

<!-- TOPO -->
<div>
  <b id="level">A1 â€“ Explorador</b>
  <div class="bg-gray-300 rounded">
    <div id="progress" class="bg-green-500 h-2 w-1/4 rounded"></div>
  </div>
</div>

<!-- MISSÃ•ES -->
<h2 class="mt-4 font-bold">MissÃµes DiÃ¡rias</h2>
<div class="grid grid-cols-3 gap-2">
  <div class="card">ğŸ“˜ Palavras</div>
  <div class="card">ğŸ§ Ouvir</div>
  <div class="card">ğŸ® Jogo</div>
</div>

<!-- EXERCÃCIO -->
<div class="card mt-4">
  <p>Fale em italiano: <b>Cibo</b></p>
  <button class="btn" onclick="speakExample()">ğŸ”Š Ouvir</button>
  <button class="btn bg-blue-500" onclick="startVoice()">ğŸ¤ Falar</button>
  <p id="voiceResult"></p>
</div>

<!-- IA CONVERSA -->
<div class="card mt-4">
  <h3 class="font-bold">ğŸ§  Conversa com IA</h3>
  <input id="aiInput" class="border p-2 w-full" placeholder="Diga algo...">
  <button class="btn mt-2" onclick="aiTalk()">Enviar</button>
  <p id="aiReply" class="mt-2 text-sm"></p>
</div>

<!-- COMUNIDADE -->
<div class="card mt-4">
  <h3 class="font-bold">ğŸ’¬ Comunidade</h3>
  <input id="chat" class="border p-2 w-full" placeholder="Mensagem">
  <button class="btn mt-2" onclick="sendChat()">Enviar</button>
  <div id="messages" class="text-sm mt-2"></div>
</div>

<!-- VIP -->
<div class="card mt-4">
  <h3 class="font-bold">ğŸ”’ VIP</h3>
  <p>ConteÃºdos avanÃ§ados bloqueados</p>
  <button class="btn bg-yellow-400" onclick="vip()">Desbloquear VIP</button>
</div>

</div>

<!-- PET -->
<div class="fixed bottom-4 right-4 text-center">
  <img src="assets/cat.gif" class="w-24 cursor-pointer animate-bounce" onclick="meow()">
  <div id="petMsg" class="bg-white p-2 rounded shadow">
    Vamos aprender ğŸ˜¸
  </div>
</div>

<!-- SOS -->
<a href="https://wa.me/393716755981" target="_blank"
class="fixed bottom-4 left-4 bg-green-500 text-white p-3 rounded-full">
ğŸ†˜ SOS
</a>

<script>
let progress = 25

function meow(){
  document.getElementById("meow").play()
  speak("Miau! Continue assim!")
}

function startApp(course){
  localStorage.setItem("course", course)
  document.getElementById("start").classList.add("hidden")
  document.getElementById("home").classList.remove("hidden")
  speak("Bem vindo ao Planicchio")
}

/* VOZ APP */
function speak(text){
  let msg = new SpeechSynthesisUtterance(text)
  msg.lang = "pt-BR"
  speechSynthesis.speak(msg)
}

/* EXEMPLO */
function speakExample(){
  let msg = new SpeechSynthesisUtterance("Cibo")
  msg.lang = "it-IT"
  speechSynthesis.speak(msg)
}

/* VOZ USUÃRIO */
function startVoice(){
  let rec = new webkitSpeechRecognition()
  rec.lang = "it-IT"
  rec.start()
  rec.onresult = e => {
    let text = e.results[0][0].transcript.toLowerCase()
    document.getElementById("voiceResult").innerText = text
    if(text.includes("cibo")){
      document.getElementById("correct").play()
      progress += 15
      document.getElementById("progress").style.width = progress + "%"
      document.getElementById("petMsg").innerText = "Perfeito ğŸ˜»"
      if(progress >= 100){
        document.getElementById("levelup").play()
        alert("ğŸ‰ NÃ­vel UP!")
        progress = 0
      }
    } else {
      document.getElementById("wrong").play()
      document.getElementById("petMsg").innerText = "Tente de novo ğŸ˜¿"
    }
  }
}

/* IA (SIMULADA â€“ PRONTA P/ GPT) */
function aiTalk(){
  let input = document.getElementById("aiInput").value
  document.getElementById("aiReply").innerText =
    "ğŸ¤– IA: Vamos praticar isso em italiano!"
}

/* CHAT */
function sendChat(){
  let msg = document.getElementById("chat").value
  document.getElementById("messages").innerHTML += "<div>ğŸ‘¤ " + msg + "</div>"
}

/* VIP */
function vip(){
  alert("VIP desbloqueia aulas, IA avanÃ§ada e nativos!")
}
</script>

<style>
.btn{
  background:#fb923c;
  color:white;
  padding:10px;
  border-radius:12px;
}
.card{
  background:white;
  padding:12px;
  border-radius:12px;
}
</style>

</body>
</html>
