<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planicchio Ultra</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --p-orange: #ff7a00; --p-light: #fff7ed; --p-dark: #2d2d2d; --p-white: #ffffff; --p-gray: #f0f0f0; --p-vip: linear-gradient(45deg, #ffd700, #ff8c00); }
        [data-theme='dark'] { --p-light: #121212; --p-white: #1e1e1e; --p-dark: #f0f0f0; --p-gray: #333; }
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Nunito', sans-serif; }
        body { background: var(--p-light); color: var(--p-dark); transition: 0.3s; }
        .screen { display: none; padding: 20px; padding-bottom: 100px; min-height: 100vh; animation: fadeIn 0.4s; }
        .active { display: block; }
        @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
        
        /* UI ELEMENTS */
        .top-bar { display: flex; align-items: center; justify-content: space-between; padding: 15px; background: var(--p-white); border-radius: 0 0 25px 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 100; }
        .xp-bar-container { flex-grow: 1; height: 12px; background: var(--p-gray); border-radius: 10px; margin: 0 15px; overflow: hidden; }
        .xp-bar-fill { height: 100%; background: var(--p-orange); width: 0%; transition: 0.5s; }
        .card { background: var(--p-white); padding: 20px; border-radius: 24px; box-shadow: 0 6px 20px rgba(0,0,0,0.04); margin-bottom: 20px; }
        .btn-course { background: var(--p-white); border: 2px solid var(--p-gray); padding: 15px; border-radius: 18px; width: 100%; text-align: left; margin-bottom: 10px; font-weight: 800; cursor: pointer; display: flex; align-items: center; gap: 15px; }
        .btn-main { background: var(--p-orange); color: white; border: none; padding: 18px; border-radius: 18px; width: 100%; font-weight: 900; cursor: pointer; box-shadow: 0 4px 0 #d36500; }
        
        /* PET & QUIZ */
        .pet-stage { text-align: center; margin: 20px 0; }
        .pet-avatar { font-size: 70px; cursor: pointer; }
        .pet-bubble { background: var(--p-white); padding: 10px; border-radius: 15px; border: 2px solid var(--p-orange); display: inline-block; font-weight: 700; margin-bottom: 10px; }
        
        nav { position: fixed; bottom: 0; left: 0; width: 100%; background: var(--p-white); display: flex; justify-content: space-around; padding: 15px; border-top: 3px solid var(--p-gray); }
        .nav-item { font-size: 24px; cursor: pointer; color: #ccc; }
        .nav-item.active-tab { color: var(--p-orange); }

        .sos-btn { position: fixed; bottom: 90px; right: 20px; background: #25d366; color: white; width: 55px; height: 55px; border-radius: 50%; display: flex; align-items: center; justify-content: center; text-decoration: none; font-size: 25px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); z-index: 1000; }
    </style>
</head>
<body>

    <a href="https://wa.me/393716755981" class="sos-btn">üÜò</a>

    <div id="screen-intro" class="screen active">
        <div class="pet-stage">
            <div class="pet-bubble">Escolha seu curso / Choose / Scegli</div><br>
            <div class="pet-avatar">üê±</div>
        </div>
        <div id="course-list"></div>
    </div>

    <div id="screen-placement" class="screen">
        <div class="card">
            <h3>Teste de N√≠vel üìä</h3>
            <p id="placement-q">Pergunta...</p>
            <div id="placement-options" style="margin-top:20px;"></div>
        </div>
    </div>

    <div id="screen-app" class="screen">
        <div class="top-bar">
            <div style="font-weight:900; color:var(--p-orange)">LV <span id="ui-lvl">1</span></div>
            <div class="xp-bar-container"><div id="ui-xp-fill" class="xp-bar-fill"></div></div>
            <div>üî• <span id="ui-streak">0</span></div>
        </div>

        <div id="tab-home" class="tab-content">
            <div class="pet-stage">
                <div class="pet-bubble" id="pet-msg">Ciao! Vamos estudar?</div><br>
                <div class="pet-avatar main-pet">üê±</div>
            </div>
            <div class="card">
                <h3>Miss√µes Di√°rias</h3>
                <p id="daily-mission">Aguardando nivelamento...</p>
            </div>
            <div class="card" style="border: 2px solid gold;">
                <h3 style="color:#d4af37">üëë √Årea VIP</h3>
                <p>Aulas com nativos e conversa√ß√£o real.</p>
                <button class="btn-main" style="background:var(--p-vip); border:none; margin-top:10px;">DESBLOQUEAR</button>
            </div>
        </div>

        <div id="tab-learn" class="tab-content" style="display:none;">
            <div id="exercise-box" class="card"></div>
        </div>

        <div id="tab-extra" class="tab-content" style="display:none;">
            <h3>Curiosidades & G√≠rias üí°</h3>
            <div id="culture-box" class="card"></div>
            <div id="slang-box" class="card"></div>
        </div>

        <nav>
            <div class="nav-item active-tab" onclick="changeTab('home', this)">üè†</div>
            <div class="nav-item" onclick="changeTab('learn', this)">üéØ</div>
            <div class="nav-item" onclick="changeTab('extra', this)">üí°</div>
            <div class="nav-item" onclick="changeTab('profile', this)">üë§</div>
        </nav>
    </div>

    <script>
        const courses = [
            { id: 'it-en', name: 'Italian ‚ûî English', flag: 'üáÆüáπ‚ûîüá¨üáß' },
            { id: 'it-pt', name: 'Italiano ‚ûî Portugu√™s', flag: 'üáÆüáπ‚ûîüáßüá∑' },
            { id: 'pt-it', name: 'Portugu√™s ‚ûî Italiano', flag: 'üáßüá∑‚ûîüáÆüáπ' },
            { id: 'pt-en', name: 'Portugu√™s ‚ûî Ingl√™s', flag: 'üáßüá∑‚ûîüá¨üáß' },
            { id: 'en-it', name: 'English ‚ûî Italian', flag: 'üá¨üáß‚ûîüáÆüáπ' },
            { id: 'en-pt', name: 'English ‚ûî Portugu√™s', flag: 'üá¨üáß‚ûîüáßüá∑' }
        ];

        const placementTests = {
            'it-pt': { q: 'Como se diz "Ma√ß√£" em Italiano?', options: ['Mela', 'Pane', 'Uva'], correct: 'Mela' },
            'pt-it': { q: 'O que significa "Buongiorno"?', options: ['Boa noite', 'Bom dia', 'Obrigado'], correct: 'Bom dia' },
            'en-it': { q: 'Translate "Water":', options: ['Fuoco', 'Acqua', 'Terra'], correct: 'Acqua' }
        };

        const cultureTips = {
            'it': "Na It√°lia, pedir um 'Latte' trar√° apenas um copo de leite. Pe√ßa 'Caff√® Latte'!",
            'en': "No Reino Unido, 'Tea time' √© levado muito a s√©rio, geralmente √†s 17h.",
            'pt': "O Brasil √© o pa√≠s com o maior n√∫mero de falantes de japon√™s fora do Jap√£o!"
        };

        let state = { xp: 0, lvl: 1, streak: 0, course: '', levelName: 'A1', pet: 'üê±' };
        let curEx = 0;

        window.onload = () => {
            const list = document.getElementById('course-list');
            courses.forEach(c => {
                list.innerHTML += `<button class="btn-course" onclick="startPlacement('${c.id}')"><span>${c.flag}</span> ${c.name}</button>`;
            });
        };

        function startPlacement(id) {
            state.course = id;
            const test = placementTests[id] || placementTests['it-pt'];
            document.getElementById('screen-intro').classList.remove('active');
            document.getElementById('screen-placement').classList.add('active');
            document.getElementById('placement-q').innerText = test.q;
            const opts = document.getElementById('placement-options');
            opts.innerHTML = '';
            test.options.forEach(o => {
                opts.innerHTML += `<button class="btn-main" style="margin-bottom:10px" onclick="finishPlacement('${o}','${test.correct}')">${o}</button>`;
            });
        }

        function finishPlacement(chosen, correct) {
            if(chosen === correct) {
                state.lvl = 2; state.levelName = 'A2';
                alert("√ìtimo! Voc√™ j√° tem uma base. N√≠vel A2 desbloqueado!");
            } else {
                alert("Iniciando do zero. N√≠vel A1!");
            }
            document.getElementById('screen-placement').classList.remove('active');
            document.getElementById('screen-app').classList.add('active');
            updateUI();
            loadCulture();
        }

        function loadCulture() {
            const lang = state.course.split('-')[1];
            document.getElementById('culture-box').innerHTML = `<h4>Sabia que?</h4><p>${cultureTips[lang] || cultureTips['it']}</p>`;
            document.getElementById('daily-mission').innerText = `Complete 5 li√ß√µes de n√≠vel ${state.levelName}`;
        }

        function changeTab(tabId, el) {
            document.querySelectorAll('.tab-content').forEach(t => t.style.display = 'none');
            document.getElementById('tab-' + tabId).style.display = 'block';
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active-tab'));
            el.classList.add('active-tab');
        }

        function updateUI() {
            document.getElementById('ui-lvl').innerText = state.lvl;
            document.getElementById('ui-xp-fill').style.width = state.xp + '%';
        }

        function toggleTheme() {
            document.body.setAttribute('data-theme', document.body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
        }
    </script>
</body>
</html>
