<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planicchio Global</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --p-orange: #ff7a00; --p-soft: #fff5eb; --p-text: #2d2d2d; }
        * { margin:0; padding:0; box-sizing:border-box; font-family:'Nunito', sans-serif; }
        body { background: #fff; color: var(--p-text); overflow-x: hidden; }

        /* --- DESIGNS DOS PETS (CSS) --- */
        .pet-base { width: 50px; height: 45px; position: relative; border-radius: 50%; border: 2px solid #fff; margin: 0 auto; }
        .pet-eye { width: 6px; height: 6px; background: #000; border-radius: 50%; position: absolute; top: 15px; }
        .eye-l { left: 12px; } .eye-r { right: 12px; }
        .pet-mouth { width: 10px; height: 5px; border-bottom: 2px solid #000; border-radius: 50%; position: absolute; top: 25px; left: 20px; }

        /* Cores e Orelhas */
        .pet-cat { background: #ff9500; }
        .pet-dog { background: #8b4513; }
        .pet-rabbit { background: #e0e0e0; }
        .pet-horse { background: #a52a2a; }
        .pet-bear { background: #4b3621; }

        /* --- LAYOUT --- */
        .screen { display: none; min-height: 100vh; padding: 20px; flex-direction: column; }
        .active { display: flex; animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .btn-course { background: white; color: var(--p-orange); border: none; padding: 18px; border-radius: 20px; width: 100%; margin-bottom: 10px; font-weight: 900; box-shadow: 0 5px 0 rgba(0,0,0,0.1); cursor: pointer; }
        .btn-main { background: var(--p-orange); color: white; border: none; padding: 15px; border-radius: 15px; font-weight: 900; cursor: pointer; box-shadow: 0 4px 0 #d36500; }
        .card { background: var(--p-soft); border-radius: 25px; padding: 20px; margin-bottom: 15px; }
        
        /* NAV & PET */
        nav { position: fixed; bottom: 0; left: 0; width: 100%; background: white; display: flex; justify-content: space-around; padding: 10px; border-top: 2px solid #eee; z-index: 100; }
        .nav-item { text-align: center; color: #ccc; cursor: pointer; font-size: 20px; flex:1; }
        .nav-item span { display: block; font-size: 10px; font-weight: 900; }
        .nav-active { color: var(--p-orange); }

        #floating-pet { position: fixed; bottom: 85px; right: 20px; z-index: 200; display: none; align-items: center; }
        .bubble { background: white; border: 2px solid var(--p-orange); padding: 8px 12px; border-radius: 15px; font-size: 12px; font-weight: 800; margin-right: 10px; }

        input, textarea, select { width: 100%; padding: 12px; border-radius: 12px; border: 2px solid #eee; margin: 8px 0; outline: none; }
        textarea { height: 100px; resize: none; }
    </style>
</head>
<body>

    <div id="screen-intro" class="screen active" style="background: var(--p-orange); justify-content: center; align-items: center;">
        <h1 style="color: white; font-weight: 900; margin-bottom: 30px; font-size: 32px;">Planicchio</h1>
        <div id="course-container" style="width: 100%; max-width: 320px;">
            </div>
    </div>

    <div id="screen-quiz" class="screen">
        <h2 id="qz-title" style="text-align: center; color: var(--p-orange); margin-bottom: 20px;">Nivelamento</h2>
        <div class="card" style="text-align: center;">
            <p id="qz-step" style="font-size: 12px; font-weight: 900; color: var(--p-orange);"></p>
            <p id="qz-question" style="font-size: 20px; font-weight: 700; margin: 20px 0;"></p>
            <div id="qz-options"></div>
        </div>
    </div>

    <div id="screen-app" class="screen">
        <div id="tab-home" class="tab-content">
            <h2 id="ui-home-title" style="font-weight: 900; color: var(--p-orange);">Home</h2>
            <div class="card" style="margin-top: 15px;">
                <h3 id="ui-rank">Nomad [A1]</h3>
                <div style="background: #fff; height: 10px; border-radius: 10px; margin: 10px 0; overflow: hidden;">
                    <div id="xp-bar" style="background: var(--p-orange); width: 10%; height: 100%;"></div>
                </div>
                <p id="ui-xp-txt" style="font-size: 12px; font-weight: 800;">XP: 10/100</p>
            </div>
            <div class="card">
                <h4 id="ui-miss-daily">Daily Missions</h4>
                <p id="ui-miss-1">üî• Practice 5 min</p>
            </div>
            <div class="card" style="background: #e6f7ff; border: 1px solid #91d5ff;">
                <h4 id="ui-miss-weekly">Weekly Missions</h4>
                <p id="ui-miss-w1">üèÜ Complete 10 lessons</p>
                <p id="ui-miss-w2">üó£Ô∏è Use voice mode 3 times</p>
            </div>
        </div>

        <div id="tab-tips" class="tab-content" style="display:none;"> <h2 id="ui-tips-t">Tips</h2> <div class="card"><p id="ui-tips-c">Content...</p></div> </div>
        <div id="tab-dict" class="tab-content" style="display:none;"> <h2 id="ui-dict-t">Dictionary</h2> <input type="text" id="dict-in"> </div>
        <div id="tab-social" class="tab-content" style="display:none;"> <h2 id="ui-social-t">Community</h2> <div class="card"><p>Chat...</p></div> </div>
        <div id="tab-learn" class="tab-content" style="display:none;"> <h2 id="ui-learn-t">Learn</h2> <div id="ex-area"></div> </div>

        <div id="tab-profile" class="tab-content" style="display:none;">
            <h2 id="ui-prof-t">Profile</h2>
            <div class="card">
                <label id="ui-name-l">Name:</label>
                <input type="text" id="user-name" value="Ana">
                <label id="ui-pet-l">Pet:</label>
                <select id="pet-select" onchange="updatePet()">
                    <option value="cat">Gato / Cat / Gatto</option>
                    <option value="dog">Cachorro / Dog / Cane</option>
                    <option value="rabbit">Coelho / Rabbit / Coniglio</option>
                    <option value="horse">Cavalo / Horse / Cavallo</option>
                    <option value="bear">Urso / Bear / Orso</option>
                </select>
                <label id="ui-diary-l">Diary:</label>
                <textarea id="user-diary" placeholder="..."></textarea>
                <button class="btn-main" style="width:100%" id="ui-save-btn" onclick="saveDiary()">Save Diary</button>
                <button class="btn-main" style="width:100%; margin-top:10px; background:#666;" id="ui-reset-btn" onclick="location.reload()">Change Course</button>
            </div>
        </div>

        <nav>
            <div class="nav-item nav-active" onclick="changeTab('home', this)">üè†<span id="nv-1">HOME</span></div>
            <div class="nav-item" onclick="changeTab('tips', this)">üí°<span id="nv-2">TIPS</span></div>
            <div class="nav-item" onclick="changeTab('dict', this)">üìñ<span id="nv-3">DICT</span></div>
            <div class="nav-item" onclick="changeTab('social', this)">ü§ù<span id="nv-4">SOCIAL</span></div>
            <div class="nav-item" onclick="changeTab('learn', this)">üéØ<span id="nv-5">LEARN</span></div>
            <div class="nav-item" onclick="changeTab('profile', this)">üë§<span id="nv-6">ME</span></div>
        </nav>
    </div>

    <div id="floating-pet">
        <div class="bubble" id="pet-msg">...</div>
        <div id="pet-render" class="pet-base pet-cat">
            <div class="pet-eye eye-l"></div><div class="pet-eye eye-r"></div>
            <div class="pet-mouth"></div>
        </div>
    </div>

    <script>
        // --- MOTOR DE TRADU√á√ÉO ---
        const langPack = {
            'it-en': {
                courses: ['Italiano ‚ûî Inglese', 'Inglese ‚ûî Italiano', 'Portoghese ‚ûî Italiano', 'Italiano ‚ûî Portoghese', 'Portoghese ‚ûî Inglese', 'Inglese ‚ûî Portoghese'],
                nv: ['HOME', 'SUGGERIMENTI', 'DIZIONARIO', 'SOCIALE', 'IMPARA', 'PROFILO'],
                ui: { h: 'Home', r: 'Nomade [A1]', md: 'Missioni Giornaliere', mw: 'Missioni Settimanali', save: 'Salva Diario', name: 'Nome:', pet: 'Mascotte:', diary: 'Diario:', welcome: 'Andiamo!', qz: 'Livellamento' },
                quiz: [
                    { q: "Come si dice 'Hello'?", o: ['Ciao', 'Acqua', 'Gatto'], a: 'Ciao' },
                    { q: "Traduci 'Mela'", o: ['Apple', 'Pear', 'Banana'], a: 'Apple' },
                    { q: "1 + 1 = ?", o: ['Due', 'Tre', 'Uno'], a: 'Due' }
                ]
            },
            'pt-it': {
                courses: ['Italiano ‚ûî Ingl√™s', 'Ingl√™s ‚ûî Italiano', 'Portugu√™s ‚ûî Italiano', 'Italiano ‚ûî Portugu√™s', 'Portugu√™s ‚ûî Ingl√™s', 'Ingl√™s ‚ûî Portugu√™s'],
                nv: ['IN√çCIO', 'DICAS', 'DICIO', 'SOCIAL', 'ESTUDAR', 'PERFIL'],
                ui: { h: 'In√≠cio', r: 'N√¥made [A1]', md: 'Miss√µes Di√°rias', mw: 'Miss√µes Semanais', save: 'Salvar Di√°rio', name: 'Nome:', pet: 'Pet:', diary: 'Di√°rio:', welcome: 'Vamos l√°!', qz: 'Nivelamento' },
                quiz: [
                    { q: "Como se diz 'Oi'?", o: ['Ciao', 'Buongiorno', 'Prego'], a: 'Ciao' },
                    { q: "Traduza 'Gato'", o: ['Gatto', 'Cane', 'Uccello'], a: 'Gatto' },
                    { q: "O que √© 'Acqua'?", o: ['√Ågua', 'Vinho', 'Leite'], a: '√Ågua' }
                ]
            }
        };

        let state = { course: 'it-en', step: 0, score: 0, pet: 'cat' };

        // Inicializar bot√µes de curso
        window.onload = () => {
            const container = document.getElementById('course-container');
            const list = langPack['pt-it'].courses; // Lista base em PT para escolha
            const keys = ['it-en', 'en-it', 'pt-it', 'it-pt', 'pt-en', 'en-pt'];
            list.forEach((name, i) => {
                container.innerHTML += `<button class="btn-course" onclick="startFlow('${keys[i]}')">${name}</button>`;
            });
        };

        function startFlow(id) {
            state.course = id;
            document.getElementById('screen-intro').classList.remove('active');
            document.getElementById('screen-quiz').classList.add('active');
            loadQuiz();
        }

        function loadQuiz() {
            const data = langPack[state.course] || langPack['it-en'];
            const q = data.quiz[state.step];
            document.getElementById('qz-title').innerText = data.ui.qz;
            document.getElementById('qz-step').innerText = `${state.step + 1} / 3`;
            document.getElementById('qz-question').innerText = q.q;
            const optDiv = document.getElementById('qz-options');
            optDiv.innerHTML = '';
            q.o.forEach(o => {
                optDiv.innerHTML += `<button class="btn-course" style="background:#eee" onclick="nextQuiz('${o}','${q.a}')">${o}</button>`;
            });
        }

        function nextQuiz(o, a) {
            if(o === a) state.score++;
            state.step++;
            if(state.step < 3) loadQuiz();
            else finishQuiz();
        }

        function finishQuiz() {
            document.getElementById('screen-quiz').classList.remove('active');
            document.getElementById('screen-app').classList.add('active');
            document.getElementById('floating-pet').style.display = 'flex';
            applyTranslation();
        }

        function applyTranslation() {
            const d = langPack[state.course] || langPack['it-en'];
            // Nav
            for(let i=1; i<=6; i++) document.getElementById(`nv-${i}`).innerText = d.nv[i-1];
            // UI
            document.getElementById('ui-home-title').innerText = d.ui.h;
            document.getElementById('ui-miss-daily').innerText = d.ui.md;
            document.getElementById('ui-miss-weekly').innerText = d.ui.mw;
            document.getElementById('ui-save-btn').innerText = d.ui.save;
            document.getElementById('ui-name-l').innerText = d.ui.name;
            document.getElementById('ui-pet-l').innerText = d.ui.pet;
            document.getElementById('ui-diary-l').innerText = d.ui.diary;
            document.getElementById('pet-msg').innerText = d.ui.welcome;
            
            const titles = { 'it-en': ["Nomad [A1]", "Traveler [A2]", "Master [C1]"], 'pt-it': ["N√¥made [A1]", "Viajante [A2]", "Mestre [C1]"] };
            const t = titles[state.course] || titles['it-en'];
            document.getElementById('ui-rank').innerText = t[state.score] || t[0];
        }

        function updatePet() {
            const p = document.getElementById('pet-select').value;
            const render = document.getElementById('pet-render');
            render.className = `pet-base pet-${p}`;
            state.pet = p;
        }

        function saveDiary() {
            const text = document.getElementById('user-diary').value;
            if(text) alert("Di√°rio salvo com sucesso! / Diario salvato!");
        }

        function changeTab(tabId, el) {
            document.querySelectorAll('.tab-content').forEach(t => t.style.display = 'none');
            document.getElementById('tab-' + tabId).style.display = 'block';
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('nav-active'));
            el.classList.add('nav-active');
        }
    </script>
</body>
</html>
