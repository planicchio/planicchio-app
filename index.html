<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Planicchio Premium</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --p-orange: #FF8C00; --p-bg: #FFF5EB; }
        body { background: var(--p-bg); font-family: sans-serif; margin: 0; overflow: hidden; -webkit-tap-highlight-color: transparent; }
        .page { display: none; height: 100vh; overflow-y: auto; padding-bottom: 120px; }
        .active { display: block !important; }
        .card { background: white; border-radius: 20px; padding: 15px; border: 2px solid #FFEDD5; box-shadow: 0 4px 0 #FFEDD5; margin: 10px; }
        .nav-bar { position: fixed; bottom: 0; width: 100%; background: white; display: flex; justify-content: space-around; padding: 10px; border-top: 2px solid #FFEDD5; z-index: 1000; }
        .pet { font-size: 60px; cursor: pointer; animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        .balao { background: white; border: 2px solid var(--p-orange); border-radius: 15px; padding: 10px; font-size: 12px; font-weight: bold; position: relative; margin-bottom: 10px; }
        .vip-lock { filter: blur(3px); pointer-events: none; opacity: 0.5; }
    </style>
</head>
<body>

    <div id="page-splash" class="page active flex flex-col items-center justify-center bg-[#FF8C00] text-center p-6">
        <div class="pet" onclick="som('meow')">üê±</div>
        <div class="balao mt-4">Ciao! Scegli il tuo corso!</div>
        <h1 class="text-white text-4xl font-black italic mb-2">PLANICCHIO</h1>
        <p class="text-white text-[10px] mb-8 font-bold opacity-80 uppercase">Escolha seu curso ‚Ä¢ Scegli il tuo corso</p>
        
        <div class="flex flex-col gap-3 w-full max-w-xs">
            <button onclick="configApp('it-en')" class="bg-yellow-400 text-orange-900 font-black p-4 rounded-xl shadow-lg uppercase text-xs">‚≠ê Italiano ‚ûî English</button>
            <button onclick="configApp('it-pt')" class="bg-white text-orange-600 font-bold p-3 rounded-xl uppercase text-xs">Italiano ‚ûî Portugu√™s</button>
            <button onclick="configApp('pt-it')" class="bg-white text-orange-600 font-bold p-3 rounded-xl uppercase text-xs">Portugu√™s ‚ûî Italiano</button>
            <button onclick="configApp('pt-en')" class="bg-white text-orange-600 font-bold p-3 rounded-xl uppercase text-xs">Portugu√™s ‚ûî English</button>
        </div>
    </div>

    <div id="page-home" class="page">
        <header class="p-4 bg-white border-b-2 border-orange-100 flex justify-between items-center">
            <span class="font-black text-orange-600 text-[10px]" id="ui-rank">APPRENDISTA üê£</span>
            <div class="flex flex-col items-end">
                <span class="text-[10px] font-bold">LVL <span id="ui-lvl">1</span></span>
                <div class="w-20 bg-gray-100 h-2 rounded-full overflow-hidden border"><div id="ui-bar" class="bg-orange-500 h-full w-[10%]"></div></div>
            </div>
        </header>

        <div class="p-2">
            <div class="card bg-orange-50">
                <h3 class="font-black text-[10px] uppercase text-orange-600 mb-3">Missioni Diarie</h3>
                <div class="space-y-2 text-xs font-bold">
                    <label class="flex items-center gap-2"><input type="checkbox" onchange="addXP(20)"> Fare 1 Quiz</label>
                    <label class="flex items-center gap-2"><input type="checkbox" onchange="addXP(20)"> Salutare il Pet</label>
                    <label class="flex items-center gap-2"><input type="checkbox" onchange="addXP(20)"> Leggere Curiosit√†</label>
                </div>
            </div>

            <div class="flex flex-col items-center my-6">
                <div class="balao" id="pet-fala">Andiamo a studiare! üöÄ</div>
                <div class="pet" id="main-pet" onclick="interagirPet()">üê±</div>
            </div>

            <div class="card text-center">
                <p class="text-orange-600 font-black text-xs">MINIGIOCO ‚ö°</p>
                <p class="text-xs my-2">Trova la parola giusta!</p>
                <button onclick="minigame()" class="bg-orange-500 text-white px-4 py-2 rounded-full font-bold text-xs">START</button>
            </div>
        </div>
    </div>

    <div id="page-ex" class="page">
        <div class="p-4">
            <h2 class="text-2xl font-black text-orange-600 mb-4">ESERCIZI</h2>
            <div class="card text-center">
                <p id="q-txt" class="text-xl font-bold mb-6">Caricamento...</p>
                <div id="q-box" class="flex flex-col gap-2"></div>
            </div>
            <div class="grid grid-cols-2 gap-2 mt-4">
                <div class="card text-center vip-lock"><p class="text-[10px] font-bold">ORTOGRAFIA üîí</p></div>
                <div class="card text-center vip-lock"><p class="text-[10px] font-bold">ASCOLTO üîí</p></div>
            </div>
        </div>
    </div>

    <div id="page-profile" class="page text-center">
        <div class="p-4">
            <div class="text-7xl mt-6" id="prof-icon">üê±</div>
            <input type="text" id="user-name" class="text-center font-black text-2xl border-b-2 border-orange-200 w-full my-4 bg-transparent outline-none" placeholder="Nome">
            
            <div class="card text-left">
                <p class="font-bold text-xs mb-2">CAMBIA PET:</p>
                <select onchange="trocarPet(this.value)" class="w-full p-2 border rounded-lg">
                    <option value="üê±">Gatto</option>
                    <option value="üê∂">Cane</option>
                    <option value="üê∞">Coniglio</option>
                </select>
            </div>

            <button onclick="window.open('https://wa.me/393716755981')" class="btn-main mt-4 bg-green-500 text-white p-4 rounded-xl font-bold w-full">SOS PLANICCHIO üì±</button>
            <button onclick="location.reload()" class="mt-8 text-gray-400 font-bold text-xs uppercase">Cambia Corso</button>
        </div>
    </div>

    <nav class="nav-bar">
        <button onclick="aba('home')" class="flex flex-col items-center text-[10px] font-bold text-orange-600">üè†<span>HOME</span></button>
        <button onclick="aba('ex')" class="flex flex-col items-center text-[10px] font-bold text-orange-600">üìñ<span>QUIZ</span></button>
        <button onclick="aba('profile')" class="flex flex-col items-center text-[10px] font-bold text-orange-600">üë§<span>PROFILO</span></button>
    </nav>

    <script>
        let xp = 0;
        let petAtual = "üê±";
        const frases = ["Bravissimo!", "Continua cos√¨!", "Stai andando forte!", "Miao! üê±"];
        const quizData = [
            {q: "How are you?", a: "Come stai?", b: "Buongiorno", c: "Grazie", ok: "a"},
            {q: "Bread", a: "Acqua", b: "Pane", c: "Mela", ok: "b"}
        ];

        function configApp(curso) {
            document.getElementById('page-splash').classList.remove('active');
            document.getElementById('page-home').classList.add('active');
            carregarQuiz();
        }

        function aba(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('page-' + id).classList.add('active');
        }

        function addXP(v) {
            xp += v;
            document.getElementById('ui-lvl').innerText = Math.floor(xp/100) + 1;
            document.getElementById('ui-bar').style.width = (xp % 100) + "%";
            if(xp % 100 === 0) som('level');
        }

        function interagirPet() {
            som('meow');
            document.getElementById('pet-fala').innerText = frases[Math.floor(Math.random()*frases.length)];
        }

        function trocarPet(emoji) {
            petAtual = emoji;
            document.getElementById('main-pet').innerText = emoji;
            document.getElementById('prof-icon').innerText = emoji;
            document.getElementById('splash-pet').innerText = emoji;
        }

        function carregarQuiz() {
            const item = quizData[Math.floor(Math.random()*quizData.length)];
            document.getElementById('q-txt').innerText = item.q;
            const box = document.getElementById('q-box');
            box.innerHTML = "";
            ['a','b','c'].forEach(opt => {
                const btn = document.createElement('button');
                btn.className = "bg-white border-2 border-orange-200 p-3 rounded-xl font-bold";
                btn.innerText = item[opt];
                btn.onclick = () => {
                    if(opt === item.ok) { som('win'); addXP(30); carregarQuiz(); }
                    else { som('lose'); btn.style.backgroundColor = "#ffcccc"; }
                };
                box.appendChild(btn);
            });
        }

        function som(tipo) {
            const ctx = new AudioContext();
            const osc = ctx.createOscillator();
            const g = ctx.createGain();
            osc.connect(g);
            g.connect(ctx.destination);
            
            if(tipo === 'win') { osc.frequency.value = 880; g.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.5); }
            else if(tipo === 'meow') { osc.frequency.value = 600; g.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.3); }
            else { osc.frequency.value = 200; g.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.5); }
            
            osc.start();
            osc.stop(ctx.currentTime + 0.5);
        }

        function minigame() {
            alert("Minigioco: Clicca sul pet 5 volte velocemente!");
        }
    </script>
</body>
</html>
